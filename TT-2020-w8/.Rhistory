food_consumption <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-18/food_consumption.csv')
View(food_consumption)
food_consumption %>%
filter(!is.na(food_category )) %>%
count(food_category , sort = TRUE)
food_consumption %>% filter(!is.na(food_category )) %>% count(food_category , sort = TRUE)
food_consumption %>% filter(!is.na(food_category)) %>% count(food_category , sort = TRUE)
library(tidyverse)
food_consumption <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-18/food_consumption.csv')
animal_products <- c('Pork', 'Poultry','Beef', 'Lamb and Goat','Fish', 'Eggs', 'Milk â€“ inc. cheese')
non_animal_products <- c('Wheat and Wheat Products', 'Rice, Soybeans', 'Nuts inc. Peanut Butter')
food_consumption %>% filter(!is.na(food_category)) %>% count(food_category , sort = TRUE)
food_consumption <- food_consumption %>%
mutate(animal_or_non = ifelse(food_category %in%
animal_products, 'animal products','non-animal products'))
food_consumption <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-18/food_consumption.csv')
animal_products <- c('Pork', 'Poultry','Beef', 'Lamb & Goat','Fish', 'Eggs', 'Milk - inc. cheese')
non_animal_products <- c('Wheat and Wheat Products', 'Rice', 'Soybeans', 'Nuts inc. Peanut Butter')
# Getting the food categories
#food_consumption %>% filter(!is.na(food_category)) %>% count(food_category , sort = TRUE)
ifelse(x > 9, "x is greater than 9", "x is not greater than 9")
food_consumption <- food_consumption %>%
mutate(animal_or_non = ifelse(food_category %in%
animal_products, 'animal products','non-animal products'))%>%
group_by(country, animal_products) %>%
mutate(total_consumption = sum(consumption, na.rm = TRUE),
total_co2_emmission = sum(co2_emmission, na.rm = TRUE),
co2_per_kg = total_co2_emmission/stotal_consumption
)
food_consumption <- food_consumption %>%
mutate(animal_or_non = ifelse(food_category %in%
animal_products, 'animal products','non-animal products'))
food_consumption <- food_consumption %>%
mutate(animal_or_non = ifelse(food_category %in%
animal_products, 'animal products','non-animal products'))%>%
group_by(country, animal_or_non) %>%
mutate(total_consumption = sum(consumption, na.rm = TRUE),
total_co2_emmission = sum(co2_emmission, na.rm = TRUE),
co2_per_kg = total_co2_emmission/stotal_consumption
)
food_consumption <- food_consumption %>%
mutate(animal_or_non = ifelse(food_category %in%
animal_products, 'animal products','non-animal products'))%>%
group_by(country, animal_or_non) %>%
mutate(total_consumption = sum(consumption, na.rm = TRUE),
total_co2_emmission = sum(co2_emmission, na.rm = TRUE),
co2_per_kg = total_co2_emmission/total_consumption
)
library(tidyverse)
food_consumption <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-18/food_consumption.csv')
animal_products <- c('Pork', 'Poultry','Beef', 'Lamb & Goat','Fish', 'Eggs', 'Milk - inc. cheese')
non_animal_products <- c('Wheat and Wheat Products', 'Rice', 'Soybeans', 'Nuts inc. Peanut Butter')
country_co2_per_kg <- food_consumption %>%
mutate(animal_or_non = ifelse(food_category %in%
animal_products, 'animal products','non-animal products'))%>%
group_by(country, animal_or_non) %>%
mutate(total_consumption = sum(consumption, na.rm = TRUE),
total_co2_emmission = sum(co2_emmission, na.rm = TRUE),
co2_per_kg = total_co2_emmission/total_consumption
)
View(country_co2_per_kg)
country_co2_per_kg <- food_consumption %>%
mutate(animal_or_non = ifelse(food_category %in%
animal_products, 'animal products','non-animal products'))%>%
group_by(country, animal_or_non) %>%
mutate(total_consumption = sum(consumption, na.rm = TRUE),
total_co2_emmission = sum(co2_emmission, na.rm = TRUE),
co2_per_kg = total_co2_emmission/total_consumption
)%>% pull()
country_co2_per_kg <- food_consumption %>%
mutate(animal_or_non = ifelse(food_category %in%
animal_products, 'animal products','non-animal products'))%>%
group_by(country, animal_or_non) %>%
mutate(total_consumption = sum(consumption, na.rm = TRUE),
total_co2_emmission = sum(co2_emmission, na.rm = TRUE),
co2_per_kg = total_co2_emmission/total_consumption
)%
country_co2_per_kg <- food_consumption %>%
mutate(animal_or_non = ifelse(food_category %in%
animal_products, 'animal products','non-animal products'))%>%
group_by(country, animal_or_non) %>%
mutate(total_consumption = sum(consumption, na.rm = TRUE),
total_co2_emmission = sum(co2_emmission, na.rm = TRUE),
co2_per_kg = total_co2_emmission/total_consumption
)
View(country_co2_per_kg)
library(tidyverse)
food_consumption <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-18/food_consumption.csv')
animal_products <- c('Pork', 'Poultry','Beef', 'Lamb & Goat','Fish', 'Eggs', 'Milk - inc. cheese')
non_animal_products <- c('Wheat and Wheat Products', 'Rice', 'Soybeans', 'Nuts inc. Peanut Butter')
food_consumption <- food_consumption %>%
mutate(animal_or_non = ifelse(food_category %in%
animal_products, 'animal products','non-animal products'))
View(food_consumption)
country_co2_per_kg <- food_consumption %>%  group_by(country, animal_or_non) %>%
mutate(total_consumption = sum(consumption, na.rm = TRUE),
total_co2_emmission = sum(co2_emmission, na.rm = TRUE),
co2_per_kg = total_co2_emmission/total_consumption
)
country_co2_per_kg <- food_consumption %>%
mutate(animal_or_non = ifelse(food_category %in%
animal_products, 'animal products','non-animal products'))%>%
group_by(country, animal_or_non) %>%
summarise(total_consumption = sum(consumption, na.rm = TRUE),
total_co2_emmission = sum(co2_emmission, na.rm = TRUE),
co2_per_kg = total_co2_emmission/total_consumption
)
ggplot(country_co2_per_kg, aes(country, co2_per_kg))
ggplot(country_co2_per_kg, aes(co2_per_kg))
ggplot(country_co2_per_kg, aes(y = co2_per_kg, x = seq(1, length(country_co2_per_kg$co2_per_kg)))) + geom_point()
wide = country_co2_per_kg %>%
spread(animal_or_non, co2_per_kg)
View(wide)
wide = country_co2_per_kg %>% select(country,animal_or_non, co2_per_kg) %>%
spread(animal_or_non, co2_per_kg)
names(wide)
country_co2_per_kg_wide = country_co2_per_kg %>% select(country,animal_or_non, co2_per_kg) %>%
spread(animal_or_non, co2_per_kg)%>%
mutate(diff_animal_or_non = 'animal products'-'non-animal products')
library(tidyverse)
food_consumption <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-18/food_consumption.csv')
animal_products <- c('Pork', 'Poultry','Beef', 'Lamb & Goat','Fish', 'Eggs', 'Milk - inc. cheese')
non_animal_products <- c('Wheat and Wheat Products', 'Rice', 'Soybeans', 'Nuts inc. Peanut Butter')
country_co2_per_kg <- food_consumption %>%
mutate(animal_or_non = ifelse(food_category %in%
animal_products, 'animal_products','non_animal_products'))%>%
group_by(country, animal_or_non) %>%
summarise(total_consumption = sum(consumption, na.rm = TRUE),
total_co2_emmission = sum(co2_emmission, na.rm = TRUE),
co2_per_kg = total_co2_emmission/total_consumption
)
country_co2_per_kg_wide = country_co2_per_kg %>% select(country,animal_or_non, co2_per_kg) %>%
spread(animal_or_non, co2_per_kg)%>%
mutate(diff_animal_or_non = animal_products-non_animal_products)
View(country_co2_per_kg_wide)
country_co2_per_kg_wide = country_co2_per_kg %>%
select(country,animal_or_non, co2_per_kg) %>%
spread(animal_or_non, co2_per_kg)%>%
mutate(diff_animal_or_non = animal_products-non_animal_products)%>%
arrange(diff_animal_or_non)
#Largest and smallest differences in co2 per kg of animal products and non-animal products
tail(country_co2_per_kg_wide)
head(country_co2_per_kg_wide)
ggplot(country_co2_per_kg, aes(x = country, y = diff_animal_or_non))+
geom_col(aes(fill = animal_or_non), width = 0.7)
ggplot(country_co2_per_kg, aes(x = country, y = co2_per_kg))+
geom_col(aes(fill = animal_or_non), width = 0.7)
plot_country_co2_per_kg <- country_co2_per_kg %>% arrange(animal_products)
View(country_co2_per_kg_wide)
View(country_co2_per_kg)
plot_country_co2_per_kg <- country_co2_per_kg %>% arrange(co2_per_kg)
ggplot(plot_country_co2_per_kg, aes(x = country, y = co2_per_kg))+
geom_col(aes(fill = animal_or_non), width = 0.7)
View(plot_country_co2_per_kg)
biggest_smallest <-c('Malawi','Bolivia','Zambia','Argentina','Swaziland','Rwanda','Sri Lanka','India' ,'Thailand' ,'Maldives' ,'Nicaragua','Myanmar')
plot_country_co2_per_kg <- country_co2_per_kg %>%
filter(country%in% biggest_smallest)%>%
arrange(co2_per_kg)
ggplot(plot_country_co2_per_kg, aes(x = country, y = co2_per_kg))+
geom_col(aes(fill = animal_or_non), width = 0.7)
library(ggtext)
install.packages("ggtext")
#Largest and smallest differences in co2 per kg of animal products and non-animal products
lower_part <- tail(country_co2_per_kg_wide)
upper_part <- head(country_co2_per_kg_wide)
ggplot(lower_part, aes(country, animal_products))
install.packages("ggthemes")
library(ggtext)
library(tidyverse)
remotes::install_github("wilkelab/ggtext")
install.packages("remotes")
remotes::install_github("wilkelab/ggtext")
install.packages("ggtext")
library(ggtext)
library('ggtext')
library(tidyverse)
library('ggtext')
library(tidyverse)
remotes::install_github("wilkelab/ggtext")
remotes::install_github("wilkelab/ggtext", force = TRUE)
library('ggtext')
ggtext
library(ggtext)
library(ggpmthemes)
library(ggthemes)
library(ggthemes)
library('ggtext')
food_consumption <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-18/food_consumption.csv')
animal_products <- c('Pork', 'Poultry','Beef', 'Lamb & Goat','Fish', 'Eggs', 'Milk - inc. cheese')
non_animal_products <- c('Wheat and Wheat Products', 'Rice', 'Soybeans', 'Nuts inc. Peanut Butter')
country_co2_per_kg <- food_consumption %>%
mutate(animal_or_non = ifelse(food_category %in%
animal_products, 'animal_products','non_animal_products'))%>%
group_by(country, animal_or_non) %>%
summarise(total_consumption = sum(consumption, na.rm = TRUE),
total_co2_emmission = sum(co2_emmission, na.rm = TRUE),
co2_per_kg = total_co2_emmission/total_consumption
)
country_co2_per_kg_wide = country_co2_per_kg %>%
select(country,animal_or_non, co2_per_kg) %>%
spread(animal_or_non, co2_per_kg)%>%
mutate(diff_animal_or_non = animal_products-non_animal_products)%>%
arrange(diff_animal_or_non)
#Largest and smallest differences in co2 per kg of animal products and non-animal products
lower_part <- tail(country_co2_per_kg_wide)
upper_part <- head(country_co2_per_kg_wide)
lower_part
country_co2_per_kg_wide = country_co2_per_kg %>%
select(country,animal_or_non, co2_per_kg) %>%
spread(animal_or_non, co2_per_kg)%>%
mutate(diff_animal_or_non = animal_products-non_animal_products)%>%
arrange(sesc(diff_animal_or_non))
country_co2_per_kg_wide = country_co2_per_kg %>%
select(country,animal_or_non, co2_per_kg) %>%
spread(animal_or_non, co2_per_kg)%>%
mutate(diff_animal_or_non = animal_products-non_animal_products)%>%
arrange(desc(diff_animal_or_non))
#Largest and smallest differences in co2 per kg of animal products and non-animal products
lower_part <- tail(country_co2_per_kg_wide)
upper_part <- head(country_co2_per_kg_wide)
lower_part
upper_part
df_biggest_smallest<-country_co2_per_kg%>%
filter(country %in% biggest_smallest)
biggest_smallest <-c('Rwanda','Swaziland','Argentina' ,'Zambia','Bolivia', 'Malawi',
'Myanmar','Nicaragua','Maldives','Thailand','India' , 'Sri Lanka')
df_biggest_smallest<-country_co2_per_kg%>%
filter(country %in% biggest_smallest)
df_biggest_smallest
df_biggest_smallest<-country_co2_per_kg%>%
filter(country %in% biggest_smallest)%>%
arrange(match(country, biggest_smallest))
df_biggest_smallest
df_biggest_smallest %>%
ggplot(aes(y = co2_per_kg, x = country, fill = animal_or_non)) +
geom_col() +
coord_flip()
df_biggest_smallest %>%
ggplot(aes(y = co2_per_kg, x = country, fill = animal_or_non)) +
geom_col() +
coord_flip() +
scale_y_continuous(expand = expand_scale(mult = c(0, 0.02))) +
xlab(NULL)
# visualisation
title <- "***animal products*** versus  ***non animal products***"
subtitle <- "***The Kilogrames of CO2 emmisiions per 1 kilogram of food<br> A selection of the countries, 5 highest and lowest difference between emmisions for animal and non animal product."
theme_set(theme_light_modified(base_family = "Alef"))
library(ggthemes)
theme_set(theme_light_modified(base_family = "Alef"))
df_biggest_smallest %>%
ggplot(aes(y = co2_per_kg, x = country, fill = animal_or_non)) +
geom_col() +
coord_flip() +
scale_y_continuous(expand = expand_scale(mult = c(0, 0.02))) +
xlab(NULL) +
ylab("Kg of CO2 emmisions") +
paletteer::scale_fill_paletteer_c("ggthemes::Orange")
install.packages("peletteer")
df_biggest_smallest %>%
ggplot(aes(y = co2_per_kg, x = country, fill = animal_or_non)) +
geom_col() +
coord_flip() +
scale_y_continuous(expand = expand_scale(mult = c(0, 0.02))) +
xlab(NULL) +
ylab("Kg of CO2 emmisions") +
labs(
title = my_title,
subtitle = my_subtitle,
caption = "Tidytuesday week #8 | Data: https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-18/food_consumption.csv | @kinenealan"
)
# visualisation
my_title <- "***animal products*** versus  ***non animal products***"
my_subtitle <- "***The Kilogrames of CO2 emmisiions per 1 kilogram of food<br> A selection of the countries, 5 highest and lowest difference between emmisions for animal and non animal product."
df_biggest_smallest %>%
ggplot(aes(y = co2_per_kg, x = country, fill = animal_or_non)) +
geom_col() +
coord_flip() +
scale_y_continuous(expand = expand_scale(mult = c(0, 0.02))) +
xlab(NULL) +
ylab("Kg of CO2 emmisions") +
labs(
title = my_title,
subtitle = my_subtitle,
caption = "Tidytuesday week #8 | Data: https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-18/food_consumption.csv | @kinenealan"
)
df_biggest_smallest %>%
ggplot(aes(y = co2_per_kg, x = country, fill = animal_or_non)) +
geom_col() +
coord_flip() +
scale_y_continuous(expand = expand_scale(mult = c(0, 0.02))) +
xlab(NULL) +
ylab("Kg of CO2 emmisions") +
labs(
title = my_title,
subtitle = my_subtitle,
caption = "Tidytuesday week #8 | Data: https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-18/food_consumption.csv | @kinenealan"
)+
theme(
legend.position = "left",
text = element_text(color = "white"),
plot.background = element_rect(fill = "#3c3c3c"),
panel.background = element_rect(fill = "#3c3c3c"),
axis.text = element_text(color = "white"),
panel.grid = element_blank(),
panel.border = element_blank(),
axis.ticks = element_blank(),
panel.grid.major.x = element_line(color = "gray50", size = 0.1),
plot.title = element_text(hjust = 0.5),
plot.subtitle = element_markdown(hjust = 0.5, family = "Antic"),
plot.caption = element_text(color = "gray60", size = 10)
)
remotes::install_github("PMassicotte/ggpmthemes", force = TRUE)
library(ggpmthemes)
ggpmthemes::import_poppins()
df_biggest_smallest %>%
ggplot(aes(y = co2_per_kg, x = country, fill = animal_or_non)) +
geom_col() +
coord_flip() +
scale_y_continuous(expand = expand_scale(mult = c(0, 0.02))) +
xlab(NULL) +
ylab("Kg of CO2 emmisions") +
labs(
title = my_title,
subtitle = my_subtitle,
caption = "Tidytuesday week #8 | Data: https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-18/food_consumption.csv | @kinenealan"
)+
theme(
legend.position = "left",
text = element_text(color = "white"),
plot.background = element_rect(fill = "#3c3c3c"),
panel.background = element_rect(fill = "#3c3c3c"),
axis.text = element_text(color = "white"),
panel.grid = element_blank(),
panel.border = element_blank(),
axis.ticks = element_blank(),
panel.grid.major.x = element_line(color = "gray50", size = 0.1),
plot.title = element_text(hjust = 0.5),
plot.subtitle = element_markdown(hjust = 0.5, family = "Antic"),
plot.caption = element_text(color = "gray60", size = 10)
)
library(ggpmthemes)
df_biggest_smallest %>%
ggplot(aes(y = co2_per_kg, x = country, fill = animal_or_non)) +
geom_col() +
coord_flip() +
scale_y_continuous(expand = expand_scale(mult = c(0, 0.02))) +
xlab(NULL) +
ylab("Kg of CO2 emmisions") +
labs(
title = my_title,
subtitle = my_subtitle,
caption = "Tidytuesday week #8 | Data: https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-18/food_consumption.csv | @kinenealan"
)+
theme(
legend.position = "left",
text = element_text(color = "white"),
plot.background = element_rect(fill = "#3c3c3c"),
panel.background = element_rect(fill = "#3c3c3c"),
axis.text = element_text(color = "white"),
panel.grid = element_blank(),
panel.border = element_blank(),
axis.ticks = element_blank(),
panel.grid.major.x = element_line(color = "gray50", size = 0.1),
plot.title = element_text(hjust = 0.5),
plot.subtitle = element_markdown(hjust = 0.5, family = "Antic"),
plot.caption = element_text(color = "gray60", size = 10)
)
#remotes::install_github("wilkelab/ggtext", force = TRUE)
library('ggtext')
install.packages(c("boot", "foreign", "knitr", "lattice", "MASS", "nlme", "osmdata", "sp"))
#remotes::install_github("wilkelab/ggtext", force = TRUE)
library('ggtext')
library(tidyverse)
#remotes::install_github("wilkelab/ggtext", force = TRUE)
library('ggtext')
